<?php
global $collectra_class;
require_once $collectra_class["utils.RestfulHelper"];
require_once $collectra_class["cache.Cache"];

class KtbsRoot{

	public $uri = null;
	public $label = null;
	
	function __construct($uri) {
		$this->uri = $uri;		
	}
	
	function exist(){
		$cache = new KtbsResourceCache($this->uri);
		list($isOK, $retval) = $cache->read();
		
		if($isOK)
			return $retval;
		
		$this->exist = RestfulHelper::get($this->uri);
		
		if($this->exist){
			$cache = new KtbsResourceCache($this->uri);
			$cache->write($this->exist);
		}
		
		return $this->exist;
	}
		
	public function test_edit(){
		
		$prefixes[0] = "@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n";		
		
		$statements[0] = '<> rdfs:label "'.$this->label.'".';
		
		$script = 	$prefixes[0]."\n"
					.$statements[0]."\n";
		
		RestfulHelper::put($this->uri, $script);		
	}
}

?>